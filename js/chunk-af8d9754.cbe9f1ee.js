(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af8d9754"],{"5e77":function(e,t,s){},"99af":function(e,t,s){"use strict";var a=s("23e7"),i=s("d039"),r=s("e8b5"),n=s("861d"),l=s("7b0b"),o=s("50c4"),d=s("8418"),u=s("65f0"),c=s("1dde"),m=s("b622"),_=s("2d00"),p=m("isConcatSpreadable"),f=9007199254740991,v="Maximum allowed index exceeded",g=_>=51||!i((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),h=c("concat"),b=function(e){if(!n(e))return!1;var t=e[p];return void 0!==t?!!t:r(e)},w=!g||!h;a({target:"Array",proto:!0,forced:w},{concat:function(e){var t,s,a,i,r,n=l(this),c=u(n,0),m=0;for(t=-1,a=arguments.length;t<a;t++)if(r=-1===t?n:arguments[t],b(r)){if(i=o(r.length),m+i>f)throw TypeError(v);for(s=0;s<i;s++,m++)s in r&&d(c,m,r[s])}else{if(m>=f)throw TypeError(v);d(c,m++,r)}return c.length=m,c}})},c99c:function(e,t,s){"use strict";s("5e77")},cbdb:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"layout-general"},[s("form",{staticClass:"form-general card-bg-theme p-6 rounded shadow",on:{submit:function(t){return e.submit(t)}}},[s("div",{staticClass:"form-general__header"},[s("h2",[e._v(e._s(e.page_title))]),s("router-link",{attrs:{to:"/users"}},[s("b-button",{attrs:{text:"Kembali",text_icon_left:"chevron-left",type:"button"}})],1)],1),s("div",{staticClass:"form-general__body"},[s("div",{staticClass:"grid grid-cols-11 gap-8 mb-16"},[e._m(0),s("div",{staticClass:"col-span-7"},[s("div",{staticClass:"field"},[s("label",{staticClass:"field-label"},[e._v("Nama Pengguna")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.model.name,expression:"model.name"}],staticClass:"field-style",attrs:{placeholder:"Nama Pengguna",type:"text"},domProps:{value:e.model.name},on:{input:function(t){t.target.composing||e.$set(e.model,"name",t.target.value)}}}),e.$v.model.name.$error?s("span",{staticClass:"field-message text-red-500"},[e._v("Nama Pengguna wajib diisi & maksimal 255 karakter.")]):e._e(),""!==e.error_name?s("span",{staticClass:"field-message text-red-500"},[e._v(e._s(e.error_name))]):e._e()]),s("div",{staticClass:"field"},[s("label",{staticClass:"field-label"},[e._v("Username")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.model.username,expression:"model.username"}],staticClass:"field-style",attrs:{placeholder:"Username",type:"text"},domProps:{value:e.model.username},on:{input:function(t){t.target.composing||e.$set(e.model,"username",t.target.value)}}}),e.$v.model.username.$error?s("span",{staticClass:"field-message text-red-500"},[e._v("Username wajib diisi & maksimal 255 karakter.")]):e._e(),""!==e.error_username?s("span",{staticClass:"field-message text-red-500"},[e._v(e._s(e.error_username))]):e._e()]),s("div",{staticClass:"field"},[s("label",{staticClass:"field-label"},[e._v("Alamat Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.model.email,expression:"model.email"}],staticClass:"field-style",attrs:{placeholder:"Email",type:"email"},domProps:{value:e.model.email},on:{input:function(t){t.target.composing||e.$set(e.model,"email",t.target.value)}}}),e.$v.model.email.$error?s("span",{staticClass:"field-message text-red-500"},[e._v("Email wajib diisi, format email, & maksimal 255 karakter.")]):e._e(),""!==e.error_email?s("span",{staticClass:"field-message text-red-500"},[e._v(e._s(e.error_email))]):e._e()]),s("div",{staticClass:"field"},[s("label",{staticClass:"field-label"},[e._v("Role")]),"loading"===e.status_list.status?s("div",{staticClass:"field-style field-style--loading"},[s("b-loading",{attrs:{kind:"circular"}})],1):s("div",{staticClass:"relative"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.model.role_id,expression:"model.role_id"}],staticClass:"field-style",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.model,"role_id",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[e._v("- Pilih Role -")]),e.list&&e.list.length>0?e._l(e.list,(function(t,a){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})):e._e()],2),s("div",{staticClass:"field-icon"},[s("b-button",{attrs:{icon_only:"chevron-down"}})],1)]),e.$v.model.role_id.$error?s("span",{staticClass:"field-message text-red-500"},[e._v("Role wajib diisi.")]):e._e(),""!==e.error_role_id?s("span",{staticClass:"field-message text-red-500"},[e._v(e._s(e.error_role_id))]):e._e()]),"analis"===e.role_label?s("div",{staticClass:"field"},[s("label",{staticClass:"field-label"},[e._v("Kasus")]),s("multiselect",{attrs:{options:e.optionsCases,multiple:!0,"open-direction":"bottom",placeholder:"Tulis keyword disini (minimal 3 karakter)","track-by":"name",label:"name",loading:e.loadingCases,searchable:!0,"internal-search":!1,"clear-on-select":!1,"close-on-select":!1,"options-limit":300,"max-height":600,"show-no-results":!0,"hide-selected":!1},on:{"search-change":e.asyncFind},model:{value:e.input_assign_to_case,callback:function(t){e.input_assign_to_case=t},expression:"input_assign_to_case"}},[s("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v("keywords yang dicari tidak ditemukan.")])]),e.$v.model.assign_to_case.$error?s("span",{staticClass:"field-message text-red-500"},[e._v("Kasus wajib diisi.")]):e._e(),""!==e.error_assign_to_case?s("span",{staticClass:"field-message text-red-500"},[e._v(e._s(e.error_assign_to_case))]):e._e()],1):e._e(),"analis"===e.role_label||"kepala-tim"===e.role_label?s("div",{staticClass:"field"},[e._m(1),"loading"===e.opsi_upline_status_list.status?s("div",{staticClass:"field-style field-style--loading"},[s("b-loading",{attrs:{kind:"circular"}})],1):s("div",{staticClass:"relative"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.model.upline_id,expression:"model.upline_id"}],staticClass:"field-style",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.model,"upline_id",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[e._v("- Pilih Atasan -")]),e.opsi_upline_list&&e.opsi_upline_list.items&&e.opsi_upline_list.items.length>0?e._l(e.opsi_upline_list.items,(function(t,a){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})):e._e()],2),s("div",{staticClass:"field-icon"},[s("b-button",{attrs:{icon_only:"chevron-down"}})],1)]),e.$v.model.upline_id.$error?s("span",{staticClass:"field-message text-red-500"},[e._v("Atasan wajib diisi.")]):e._e(),""!==e.error_upline_id?s("span",{staticClass:"field-message text-red-500"},[e._v(e._s(e.error_upline_id))]):e._e()]):e._e()])]),"GeneralUsersEdit"===e.route_name?[s("div",{staticClass:"grid grid-cols-11 gap-8 mb-16"},[e._m(2),s("div",{staticClass:"col-span-7"},[s("div",{staticClass:"field"},[s("label",{staticClass:"field-label"},[e._v("Kata sandi")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.model.password,expression:"model.password"}],staticClass:"field-style",attrs:{placeholder:"Password",type:"password"},domProps:{value:e.model.password},on:{input:function(t){t.target.composing||e.$set(e.model,"password",t.target.value)}}}),e.$v.model.password.$error?s("span",{staticClass:"field-message text-red-500"},[e._v("Kata sandi minimal 6 karakter & maksimal 255 karakter.")]):e._e(),""!==e.error_password?s("span",{staticClass:"field-message text-red-500"},[e._v(e._s(e.error_password))]):e._e()]),s("div",{staticClass:"field"},[s("label",{staticClass:"field-label"},[e._v("Ulangi kata sandi")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.model.repeat_password,expression:"model.repeat_password"}],staticClass:"field-style",attrs:{placeholder:"Repeat Password",type:"password"},domProps:{value:e.model.repeat_password},on:{input:function(t){t.target.composing||e.$set(e.model,"repeat_password",t.target.value)}}}),e.$v.model.repeat_password.$error?s("span",{staticClass:"field-message text-red-500"},[e._v("Kata sandi harus sama")]):e._e(),""!==e.error_repeat_password?s("span",{staticClass:"field-message text-red-500"},[e._v(e._s(e.error_repeat_password))]):e._e()])])])]:e._e()],2),s("div",{staticClass:"form-general__footer"},[s("b-button",{attrs:{text:"Reset",type:"button"},nativeOn:{click:function(t){return e.reset()}}}),s("b-button",{attrs:{text:"Simpan",kind:"primary",type:"submit"}})],1)])])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-span-4 pr-12"},[s("h2",{staticClass:"text-xl font-bold mb-2"},[e._v("Pengguna")]),s("p",{staticClass:"text-gray-400"},[e._v("Pastikan Informasi pengguna diisi sesuai dengan kebutuhan peran.")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",{staticClass:"field-label"},[e._v("Atasan "),s("sup",[e._v("*")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-span-4 pr-12"},[s("h2",{staticClass:"text-xl font-bold mb-2"},[e._v("Kata Sandi")]),s("p",{staticClass:"text-gray-400"},[e._v("Silakan perbaharui kata sandi bila perlu.")])])}],r=s("1da1"),n=s("5530"),l=(s("96cf"),s("b0c0"),s("d81d"),s("ac1f"),s("5319"),s("a15b"),s("4de4"),s("b64b"),s("caad"),s("2532"),s("99af"),s("2f62")),o=s("b5ae"),d=s("8e5f"),u=s.n(d),c=(s("e607"),{name:"GeneralUsersForm",components:{Multiselect:u.a},data:function(){return{route_name:"",first_load_page:!1,role_label:"",input_assign_to_case:[],optionsCases:[],loadingCases:!1,timeout:null,model:{name:"",username:"",email:"",role_id:"",assign_to_case:"",upline_id:"",password:"",repeat_password:""},error_name:"",error_username:"",error_email:"",error_role_id:"",error_assign_to_case:"",error_upline_id:"",error_password:"",error_repeat_password:""}},validations:{model:{name:{required:o["required"],maxLength:Object(o["maxLength"])(255)},username:{required:o["required"],maxLength:Object(o["maxLength"])(255)},email:{required:o["required"],maxLength:Object(o["maxLength"])(255),email:o["email"]},role_id:{required:o["required"]},assign_to_case:{},upline_id:{required:Object(o["requiredIf"])((function(){return"analis"===this.role_label||"kepala-tim"===this.role_label}))},password:{minLength:Object(o["minLength"])(6)},repeat_password:{minLength:Object(o["minLength"])(6),sameAsPassword:Object(o["sameAs"])("password")}}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(l["b"])("users",["detail"])),Object(l["b"])("users",{opsi_upline_status_list:function(e){return e.status_list},opsi_upline_list:function(e){return e.list}})),Object(l["b"])("roles",["status_list","list"])),Object(l["b"])("cases",{cases_status_list:function(e){return e.status_list},cases_list:function(e){return e.list}})),{},{id:function(){return this.$route.params.id},data:function(){return this.$route.params.data},page_title:function(){var e="Ubah Pengguna";return"GeneralUsersCreate"===this.route_name&&(e="Tambah Pengguna"),e}}),watch:{id:function(){},page_title:function(){},detail:function(e){this.model.name=e.name?e.name:"",this.model.username=e.username?e.username:"",this.model.email=e.email?e.email:"",this.model.role_id=e.role_id?e.role_id:"",e.role&&e.role.label&&"analis"===e.role.label&&e.assign_to_case&&(this.input_assign_to_case=e.assign_to_case.map((function(e){return{name:e,id:e}}))),this.model.upline_id=e.upline_id?e.upline_id:""},"model.username":function(e){""!==e&&null!==e&&(this.model.username=e.replace(/\s+/g,"_"))},"model.role_id":function(e){this.setRoleLabel()},input_assign_to_case:function(e){var t=e;t=t.map((function(e){return e.id})),t=t.join(","),this.model.assign_to_case=t},list:function(){this.setRoleLabel()},role_label:function(e){this.getUserRoleCustom()},cases_status_list:function(e){"loading"===e.status?this.loadingCases=!0:this.loadingCases=!1},cases_list:function(e){e.doc&&e.doc.length>0&&(this.optionsCases=e.doc),console.log(this.optionsCases)}},methods:{setRoleLabel:function(){var e=this.model.role_id;""!==this.model.role_id&&this.list&&this.list.length>0&&(e=this.list.filter((function(t){return t.id===e}))[0].label),"analis"!==e&&this.list&&this.list.length>0&&(this.input_assign_to_case=[]),this.role_label=e},getUserRoleCustom:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return!1===e.first_load_page&&(e.model.upline_id=""),!0===e.first_load_page&&(e.first_load_page=!1),t.next=4,e.$store.commit("users/setList",{});case 4:"analis"!==e.role_label&&"kepala-tim"!==e.role_label||(s="",a=[],a="analis"===e.role_label?e.list.filter((function(e){return"kepala-tim"===e.label})):e.list.filter((function(e){return"kasubdit"===e.label})),a.length>0&&(s=a[0].id),""!==s&&e.$store.dispatch("users/getList",[100,1,s]));case 5:case"end":return t.stop()}}),t)})))()},asyncFind:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e.length>2&&(clearTimeout(t.timeout),a=t,t.timeout=setTimeout((function(){a.loadingCases=!0,a.optionsCases=[],a.$store.dispatch("cases/getList",[100,1,e])}),650));case 1:case"end":return s.stop()}}),s)})))()},setEmptyModel:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in Object.keys(this.model))!0===e&&(this.model[Object.keys(this.model)[t]]="")},setErrors:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!0===e?(this.error_name="",this.error_username="",this.error_email="",this.error_role_id="",this.error_assign_to_case="",this.error_upline_id="",this.error_password="",this.error_repeat_password=""):!0!==e&&null!==t&&(this.error_name=t.name?t.name:"",this.error_username=t.username?t.username:"",this.error_email=t.email?t.email:"",this.error_role_id=t.role_id?t.role_id:"",this.error_assign_to_case=t.assign_to_case?t.assign_to_case:"",this.error_upline_id=t.upline_id?t.upline_id:"",this.error_password=t.password?t.password:"",this.error_repeat_password=t.repeat_password?t.repeat_password:"")},reset:function(){var e=arguments,t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a=e.length>0&&void 0!==e[0]&&e[0],!0===a?(t.setEmptyModel(!0),t.$nextTick((function(){t.$v.$reset()})),t.setErrors(!0),window.scroll({top:0,left:0,behavior:"smooth"})):t.$swal.fire({icon:"warning",title:"Are you sure you want to reset form?",confirmButtonText:"Yes!",confirmButtonColor:"#DD6B55",showCancelButton:!0,allowOutsideClick:!1}).then((function(e){e.isConfirmed&&t.getData()}));case 2:case"end":return s.stop()}}),s)})))()},getData:function(){var e=arguments,t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.length>0&&void 0!==e[0]&&e[0],t.reset(!0),"GeneralUsersEdit"===t.route_name&&Event.$emit("showLoading",!0),s.next=5,t.$store.dispatch("roles/getList",[100,1]);case 5:"GeneralUsersEdit"===t.route_name?t.$store.dispatch("users/getDetail",t.id).then((function(e){"success"===e?Event.$emit("showLoading",!1):Event.$emit("error")})):t.$store.commit("users/setDetail",{});case 6:case"end":return s.stop()}}),s)})))()},submit:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.preventDefault(),this.$v.$touch(),this.$v.model.$invalid){for(var a in Object.keys(this.$v.model)){var i=Object.keys(this.$v.model)[a];if(i.includes("$"))return!1;if(this.$v.model[i].$error)break}window.scrollTo(0,0)}else{var r=this.model;console.log(r),r=Object.keys(r).map((function(e){return r[e]})),console.log(r),"GeneralUsersCreate"===this.route_name?this.$store.dispatch("users/create",r).then((function(e){"success"===e.result?(!1===s?t.$router.push("/users"):t.$router.push("/users/"+e.data.data.id+"/edit"),t.$swal.fire({icon:"success",title:"Data successfully created!",timer:3e3})):e.data.message&&e.data.message.errors?(t.setErrors(!1,e.data.message.errors),Event.$emit("showLoading",!1),window.scrollTo(0,0)):Event.$emit("error")})):(r=[this.id].concat(r),this.$store.dispatch("users/update",r).then((function(e){"success"===e.result?(!1===s&&t.$router.push("/users"),t.$swal.fire({icon:"success",title:"Data berhasil diperbarui",timer:3e3})):e.data.message&&e.data.message.errors?(t.setErrors(!1,e.data.message.errors),Event.$emit("showLoading",!1),window.scrollTo(0,0)):Event.$emit("error")})))}}},created:function(){},beforeRouteEnter:function(e,t,s){s((function(t){t.route_name=e.name,"GeneralUsersCreate"!==e.name&&"GeneralUsersEdit"!==e.name||(t.getData(),"GeneralUsersEdit"===e.name&&(t.first_load_page=!0))}))},beforeRouteLeave:function(e,t,s){this.route_name="",this.$store.commit("users/setDetail",{}),s()},mounted:function(){}}),m=c,_=(s("c99c"),s("2877")),p=Object(_["a"])(m,a,i,!1,null,null,null);t["default"]=p.exports},e607:function(e,t,s){}}]);
//# sourceMappingURL=chunk-af8d9754.cbe9f1ee.js.map