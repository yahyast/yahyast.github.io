(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-699e818c"],{1141:function(e,t,a){},"2ca0":function(e,t,a){"use strict";var i=a("23e7"),r=a("06cf").f,n=a("50c4"),s=a("577e"),o=a("5a34"),l=a("1d80"),c=a("ab13"),u=a("c430"),d="".startsWith,m=Math.min,p=c("startsWith"),f=!u&&!p&&!!function(){var e=r(String.prototype,"startsWith");return e&&!e.writable}();i({target:"String",proto:!0,forced:!f&&!p},{startsWith:function(e){var t=s(l(this));o(e);var a=n(m(arguments.length>1?arguments[1]:void 0,t.length)),i=s(e);return d?d.call(t,i,a):t.slice(a,a+i.length)===i}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var i=a("1d80"),r=a("577e"),n=a("5899"),s="["+n+"]",o=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),c=function(e){return function(t){var a=r(i(t));return 1&e&&(a=a.replace(o,"")),2&e&&(a=a.replace(l,"")),a}};e.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(e,t,a){var i=a("861d"),r=a("d2bb");e.exports=function(e,t,a){var n,s;return r&&"function"==typeof(n=t.constructor)&&n!==a&&i(s=n.prototype)&&s!==a.prototype&&r(e,s),e}},"81d4":function(e,t,a){},a6ff:function(e,t,a){"use strict";a("1141")},a9e3:function(e,t,a){"use strict";var i=a("83ab"),r=a("da84"),n=a("94ca"),s=a("6eeb"),o=a("5135"),l=a("c6b6"),c=a("7156"),u=a("d9b5"),d=a("c04e"),m=a("d039"),p=a("7c73"),f=a("241c").f,h=a("06cf").f,g=a("9bf2").f,v=a("58a8").trim,b="Number",w=r[b],k=w.prototype,x=l(p(k))==b,y=function(e){if(u(e))throw TypeError("Cannot convert a Symbol value to a number");var t,a,i,r,n,s,o,l,c=d(e,"number");if("string"==typeof c&&c.length>2)if(c=v(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(n=c.slice(2),s=n.length,o=0;o<s;o++)if(l=n.charCodeAt(o),l<48||l>r)return NaN;return parseInt(n,i)}return+c};if(n(b,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var _,$=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof $&&(x?m((function(){k.valueOf.call(a)})):l(a)!=b)?c(new w(y(t)),a,$):y(t)},I=i?f(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),C=0;I.length>C;C++)o(w,_=I[C])&&!o($,_)&&g($,_,h(w,_));$.prototype=k,k.constructor=$,s(r,b,$)}},b8e2:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"form-general card-bg-theme p-8 rounded",staticStyle:{"max-width":"2000px"},attrs:{id:"form-album"},on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[a("div",{staticClass:"form-general__header w-full"},[a("h2",{staticClass:"text-2xl"},[e._v(e._s("create"===e.id?"Tambah":"Ubah")+" Foto")])]),a("div",{staticClass:"form-general__body w-full"},[a("div",{staticClass:"field field--icon-right w-full"},[a("label",{staticClass:"field-label"},[e._v("Judul Album")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.model.title,expression:"model.title"}],staticClass:"field-style",attrs:{type:"text",placeholder:"Tulis judul album disini..."},domProps:{value:e.model.title},on:{input:function(t){t.target.composing||e.$set(e.model,"title",t.target.value)}}}),e.$v.model.title.$error?a("span",{staticClass:"field-message text-red-500"},[e._v("This title is required & max length is 255 char.")]):e._e()]),a("div",{staticClass:"field field--icon-right w-full"},[a("label",{staticClass:"field-label"},[e._v("Deskripsi Album")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.model.description,expression:"model.description"}],staticClass:"field-style",staticStyle:{"padding-top":"1rem","min-height":"160px"},attrs:{placeholder:"Tulis Deskripsi album disini..."},domProps:{value:e.model.description},on:{input:function(t){t.target.composing||e.$set(e.model,"description",t.target.value)}}})]),a("div",{staticClass:"field field--icon-right w-full"},[a("label",{staticClass:"field-label"},[e._v("Unggah Foto")]),a("div",{staticClass:"block box-file-upload"},[a("UploadImages",{on:{changed:e.handleImages}})],1),a("span",{staticClass:"field-message"},[e._v("Ukuran maksimal setiap file 2 MB.")])]),"create"!==e.id?a("div",{staticClass:"container-photo field field--icon-right w-full pt-7"},[a("label",{staticClass:"field-label"},[e._v("Foto Tersimpan")]),e.detail_album.image&&e.detail_album.image.length>0?a("ul",{staticClass:"block-media"},e._l(e.detail_album.image,(function(t,i){return a("li",{key:i},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.thumbnail,expression:"item.thumbnail"}]}),a("div",{staticClass:"floating-action"},[a("b-button",{attrs:{icon_only:"trash",kind:"danger",size:"small",type:"button"},nativeOn:{click:function(a){return e.deletePhoto(t.id)}}})],1)])})),0):a("span",[e._v("-")])]):e._e()]),a("div",{staticClass:"form-general__footer"},[a("router-link",{attrs:{to:"/bdi/foto/album"}},[a("b-button",{attrs:{text:"Batalkan",type:"button"}})],1),a("b-button",{attrs:{text:"Simpan",kind:"primary",type:"submit"}})],1)])},r=[],n=a("1da1"),s=a("5530"),o=(a("96cf"),a("a4d3"),a("e01a"),a("b64b"),a("caad"),a("2532"),a("d3b7"),a("ddb0"),a("b0c0"),a("2f62")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",on:{dragover:function(t){return t.preventDefault(),e.dragOver.apply(null,arguments)},dragleave:function(t){return t.preventDefault(),e.dragLeave.apply(null,arguments)},drop:function(t){return t.preventDefault(),e.drop(t)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.dropped,expression:"dropped == 2"}],staticClass:"drop"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"error"},[e._v(" "+e._s(e.error)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.Imgs.length,expression:"Imgs.length == 0"}],staticClass:"beforeUpload"},[a("input",{ref:"uploadInput",staticStyle:{"z-index":"1"},attrs:{type:"file",accept:"image/*",multiple:""},on:{change:e.previewImgs}}),a("svg",{staticClass:"icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[a("title",[e._v("Upload Image")]),a("g",{attrs:{id:"Upload_Image","data-name":"Upload Image"}},[a("g",{attrs:{id:"_Group_","data-name":"<Group>"}},[a("g",{attrs:{id:"_Group_2","data-name":"<Group>"}},[a("g",{attrs:{id:"_Group_3","data-name":"<Group>"}},[a("circle",{staticStyle:{fill:"none",stroke:"#303c42","stroke-linecap":"round","stroke-linejoin":"round"},attrs:{id:"_Path_","data-name":"<Path>",cx:"18.5",cy:"16.5",r:"5"}})]),a("polyline",{staticStyle:{fill:"none",stroke:"#303c42","stroke-linecap":"round","stroke-linejoin":"round"},attrs:{id:"_Path_2","data-name":"<Path>",points:"16.5 15.5 18.5 13.5 20.5 15.5"}}),a("line",{staticStyle:{fill:"none",stroke:"#303c42","stroke-linecap":"round","stroke-linejoin":"round"},attrs:{id:"_Path_3","data-name":"<Path>",x1:"18.5",y1:"13.5",x2:"18.5",y2:"19.5"}})]),a("g",{attrs:{id:"_Group_4","data-name":"<Group>"}},[a("polyline",{staticStyle:{fill:"none",stroke:"#303c42","stroke-linecap":"round","stroke-linejoin":"round"},attrs:{id:"_Path_4","data-name":"<Path>",points:"0.6 15.42 6 10.02 8.98 13"}}),a("polyline",{staticStyle:{fill:"none",stroke:"#303c42","stroke-linecap":"round","stroke-linejoin":"round"},attrs:{id:"_Path_5","data-name":"<Path>",points:"17.16 11.68 12.5 7.02 7.77 11.79"}}),a("circle",{staticStyle:{fill:"none",stroke:"#303c42","stroke-linecap":"round","stroke-linejoin":"round"},attrs:{id:"_Path_6","data-name":"<Path>",cx:"8",cy:"6.02",r:"1.5"}}),a("path",{staticStyle:{fill:"none",stroke:"#303c42","stroke-linecap":"round","stroke-linejoin":"round"},attrs:{id:"_Path_7","data-name":"<Path>",d:"M19.5,11.6V4A1.5,1.5,0,0,0,18,2.5H2A1.5,1.5,0,0,0,.5,4V15A1.5,1.5,0,0,0,2,16.5H13.5"}})])])])]),a("p",{staticClass:"mainMessage"},[e._v(" "+e._s(e.uploadMsg?e.uploadMsg:"Click to upload or drop your images here")+" ")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.Imgs.length>0,expression:"Imgs.length > 0"}],staticClass:"imgsPreview"},[a("button",{staticClass:"clearButton",attrs:{type:"button"},on:{click:e.reset}},[e._v(" "+e._s(e.clearAll?e.clearAll:"clear All")+" ")]),e._l(e.Imgs,(function(t,i){return a("div",{key:i,staticClass:"imageHolder"},[a("img",{attrs:{src:t}}),a("span",{staticClass:"delete",staticStyle:{color:"white"},on:{click:function(t){return e.deleteImg(--i)}}},[a("svg",{staticClass:"icon",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[a("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}})])]),++i==e.Imgs.length?a("div",{staticClass:"plus",on:{click:e.append}},[e._v("+")]):e._e()])}))],2)])},c=[],u=a("6b75");function d(e){if(Array.isArray(e))return Object(u["a"])(e)}a("d28b"),a("3ca3"),a("a630");function m(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var p=a("06c5");function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e){return d(e)||m(e)||Object(p["a"])(e)||f()}a("a9e3"),a("159b"),a("2ca0"),a("a434");var g={name:"VueUploadImages",data:function(){return{error:"",files:[],dropped:0,Imgs:[]}},props:{max:Number,uploadMsg:String,maxError:String,fileError:String,clearAll:String},methods:{dragOver:function(){this.dropped=2},dragLeave:function(){},drop:function(e){var t,a=!0,i=Array.from(e.dataTransfer.files);e&&i&&(i.forEach((function(e){!1===e.type.startsWith("image")&&(a=!1)})),1==a?this.$props.max&&i.length+this.files.length>this.$props.max?this.error=this.$props.maxError?this.$props.maxError:"Maximum files is"+this.$props.max:((t=this.files).push.apply(t,h(i)),this.previewImgs()):this.error=this.$props.fileError?this.$props.fileError:"Unsupported file type");this.dropped=0},append:function(){this.$refs.uploadInput.click()},readAsDataURL:function(e){return new Promise((function(t,a){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=function(){a(i)},i.readAsDataURL(e)}))},deleteImg:function(e){this.Imgs.splice(e,1),this.files.splice(e,1),this.$emit("changed",this.files),this.$refs.uploadInput.value=null},previewImgs:function(e){var t,a=this;if(this.$props.max&&e&&e.currentTarget.files.length+this.files.length>this.$props.max)this.error=this.$props.maxError?this.$props.maxError:"Maximum files is"+this.$props.max;else{0==this.dropped&&(t=this.files).push.apply(t,h(e.currentTarget.files)),this.error="",this.$emit("changed",this.files);var i=[];if(this.files.length){for(var r=0;r<this.files.length;r++)i.push(this.readAsDataURL(this.files[r]));Promise.all(i).then((function(e){a.Imgs=e}))}}},reset:function(){this.$refs.uploadInput.value=null,this.Imgs=[],this.files=[],this.$emit("changed",this.files)}}},v=g,b=(a("a6ff"),a("2877")),w=Object(b["a"])(v,l,c,!1,null,"44324f62",null),k=w.exports,x=a("b5ae"),y={name:"BdiListOfPhotoForm",components:{UploadImages:k},data:function(){return{ModelNewAlbum:[],newAlbum:!0,model:{title:"",description:"",images:[]}}},validations:{model:{title:{required:x["required"],maxLength:Object(x["maxLength"])(255)},description:{},images:{}}},computed:Object(s["a"])({id:function(){return this.$route.params.id}},Object(o["b"])("photo",["detail_album"])),watch:{id:function(){},detail_album:function(e){this.model.title=e.title?e.title:"",this.model.description=e.description?e.description:""},"model.images":function(e,t){this.checkMaxFileSize(e,t)}},methods:{createNewAlbum:function(){this.newAlbum=!this.newAlbum},handleImages:function(e){this.model.images=e},checkMaxFileSize:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var r,n,s,o,l,c,u,d;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=0,n=2048,s=!1,o=null,!(e.length>0)){i.next=15;break}l=0;case 6:if(!(l<e.length)){i.next=15;break}if(r=Math.round(e[l].size/1024),!(r>n)){i.next=12;break}return s=!0,o=l,i.abrupt("break",15);case 12:l++,i.next=6;break;case 15:s&&(Event.$emit("showLoading","true"),c=document.querySelectorAll(".delete")[o],u=a,d=setInterval((function(){void 0!==document.querySelectorAll(".delete")[o]&&(c=document.querySelectorAll(".delete")[o],c.click(),u.model.images=t,Event.$emit("error","Ukuran file lebih dari 2 Mb!")),void 0!==c&&clearInterval(d)}),650));case 16:case"end":return i.stop()}}),i)})))()},getData:function(){var e=arguments,t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=!(e.length>0&&void 0!==e[0])||e[0],i&&(r=document.querySelector(".clearButton"),r&&r.click()),"create"===t.id){a.next=8;break}return Event.$emit("showLoading",!0),a.next=6,t.$store.dispatch("photo/getDetailAlbum",t.id).then((function(e){"success"===e?Event.$emit("showLoading",!1):Event.$emit("error")}));case 6:a.next=10;break;case 8:return a.next=10,t.$store.commit("photo/setDetailAlbum",{});case 10:case"end":return a.stop()}}),a)})))()},setEmptyModel:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in Object.keys(this.model))!0===e&&(this.model[Object.keys(this.model)[t]]="");this.url=null},reset:function(){var e=this;this.setEmptyModel(!0),this.$nextTick((function(){e.$v.$reset()}))},deletePhoto:function(e){var t=this;this.$swal.fire({icon:"warning",title:"Konfirmasi Hapus foto",text:"Apakah anda yakin ingin menghapus foto ini?",confirmButtonText:"Hapus foto",cancelButtonText:"Batalkan",confirmButtonColor:"#DD6B55",showCancelButton:!0,allowOutsideClick:!1}).then((function(a){a.isConfirmed&&(Event.$emit("showLoading",!0),t.$store.dispatch("photo/deletePhoto",e).then((function(e){"success"===e?(t.getData(!1),t.$swal.fire({icon:"success",title:"Data berhasil dihapus!",timer:3e3})):e.data&&e.data.message?Event.$emit("error",e.data.message):Event.$emit("error")})))}))},submit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.preventDefault(),t.$v.$touch(),!t.$v.model.$invalid){a.next=15;break}a.t0=regeneratorRuntime.keys(Object.keys(t.$v.model));case 4:if((a.t1=a.t0()).done){a.next=13;break}if(i=a.t1.value,r=Object.keys(t.$v.model)[i],!r.includes("$")){a.next=9;break}return a.abrupt("return",!1);case 9:if(!t.$v.model[r].$error){a.next=11;break}return a.abrupt("break",13);case 11:a.next=4;break;case 13:return window.scrollTo(0,0),a.abrupt("return");case 15:Event.$emit("showLoading",!0),n=t.model,0===n.images.length&&delete n.images,"create"===t.id?t.$store.dispatch("photo/createAlbum",n).then((function(e){"success"===e.result?t.$swal.fire({icon:"success",title:"Data berhasil disimpan.",confirmButtonText:"Tetap dihalaman ini",confirmButtonColor:"#5a80e7",showCancelButton:!0,cancelButtonText:"Kembali ke BDI",allowOutsideClick:!1}).then((function(a){a.isConfirmed?(t.$router.push({path:"/bdi/foto/form/"+e.data.id}),t.getData()):t.$router.push({path:"/bdi/foto/album"}),Event.$emit("success","Data berhasil dibuat!")})):Event.$emit("error")})):t.$store.dispatch("photo/updateAlbum",[t.id,n]).then((function(e){"success"===e.result?t.$swal.fire({icon:"success",title:"Data berhasil disimpan.",confirmButtonText:"Tetap dihalaman ini",confirmButtonColor:"#5a80e7",showCancelButton:!0,cancelButtonText:"Kembali ke BDI",allowOutsideClick:!1}).then((function(e){e.isConfirmed?t.getData():t.$router.push({path:"/bdi/foto/album"}),Event.$emit("success","Data berhasil diperbarui!")})):Event.$emit("error")}));case 19:case"end":return a.stop()}}),a)})))()}},mounted:function(){},beforeRouteEnter:function(e,t,a){a((function(t){"BDI_ListOfPhotoForm"===e.name&&t.getData()}))}},_=y,$=(a("c279"),Object(b["a"])(_,i,r,!1,null,null,null));t["default"]=$.exports},c279:function(e,t,a){"use strict";a("81d4")}}]);
//# sourceMappingURL=chunk-699e818c.f37d22c8.js.map