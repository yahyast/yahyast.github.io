(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a0c1afc"],{"541d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout-general"},[a("form",{staticClass:"form-general card-bg-theme p-6 rounded shadow",on:{submit:function(t){return e.submit(t)}}},[a("div",{staticClass:"form-general__header"},[a("h2",[e._v(e._s(e.page_title))]),a("router-link",{attrs:{to:"/cases"}},[a("b-button",{attrs:{text:"Kembali",text_icon_left:"chevron-left",type:"button"}})],1)],1),a("div",{staticClass:"form-general__body"},[a("div",{staticClass:"grid grid-cols-11 gap-8 mb-16"},[e._m(0),a("div",{staticClass:"col-span-7"},[a("div",{staticClass:"field"},[a("label",{staticClass:"field-label"},[e._v("Nama Kasus")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.model.name,expression:"model.name"}],staticClass:"field-style",attrs:{placeholder:"Name",type:"text"},domProps:{value:e.model.name},on:{input:function(t){t.target.composing||e.$set(e.model,"name",t.target.value)}}}),e.$v.model.name.$error?a("span",{staticClass:"field-message text-red-500"},[e._v("Nama kasus wajib diisi & maksimal memiliki 255 karakter.")]):e._e(),""!==e.error_name?a("span",{staticClass:"field-message text-red-500"},[e._v(e._s(e.error_name))]):e._e()]),a("div",{staticClass:"field"},[a("label",{staticClass:"field-label"},[e._v("Deskripsi Kasus")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.model.description,expression:"model.description"}],staticClass:"field-style",attrs:{placeholder:"Tulis Deskripsi disini...",type:"text",rows:"5"},domProps:{value:e.model.description},on:{input:function(t){t.target.composing||e.$set(e.model,"description",t.target.value)}}}),e.$v.model.description.$error?a("span",{staticClass:"field-message text-red-500"},[e._v("Deskripsi wajib diisi & maksimal memiliki 255 karakter.")]):e._e(),""!==e.error_description?a("span",{staticClass:"field-message text-red-500"},[e._v(e._s(e.error_description))]):e._e()])])]),a("div",{staticClass:"grid grid-cols-11 gap-8 mb-16"},[e._m(1),a("div",{staticClass:"col-span-7"},[a("div",{staticClass:"field"},[a("label",{staticClass:"field-label"},[e._v("Pilih Gatra")]),"loading"===e.status_list_gatra.status?a("div",{staticClass:"relative p-10"},[a("b-loading",{attrs:{text:"Memuat data"}})],1):[e.list_gatra&&e.list_gatra.length>0?[a("div",{staticClass:"grid grid-cols-3 gap-2 mt-4"},e._l(e.list_gatra,(function(t){return a("b-checkbox",{key:t.id,staticClass:"mb-4",attrs:{value:t.id,label:t.label},model:{value:e.choosenGatra,callback:function(t){e.choosenGatra=t},expression:"choosenGatra"}})})),1)]:a("span",{staticClass:"text-center"},[e._v("-")])],""!==e.error_gatra?a("span",{staticClass:"field-message text-red-500"},[e._v(e._s(e.error_gatra))]):e._e()],2)])])]),a("div",{staticClass:"form-general__footer"},[a("b-button",{attrs:{text:"Reset",type:"button"},nativeOn:{click:function(t){return e.reset()}}}),a("b-button",{attrs:{text:"Simpan",kind:"primary",type:"submit"}})],1)])])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-span-4 pr-12"},[a("h2",{staticClass:"text-xl font-bold mb-2"},[e._v("Informasi Kasus")]),a("p",{staticClass:"text-gray-400"},[e._v("Pastikan Informasi kasus diisi sesuai dengan kebutuhan peran.")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-span-4 pr-12"},[a("h2",{staticClass:"text-xl font-bold mb-2"},[e._v("Detail Kasus")]),a("p",{staticClass:"text-gray-400"},[e._v("Pilih Gatra yang sesuai dengan kasus")])])}],i=a("1da1"),n=a("5530"),o=(a("96cf"),a("b0c0"),a("a4d3"),a("e01a"),a("b64b"),a("caad"),a("2532"),a("d81d"),a("99af"),a("2f62")),d=a("b5ae"),l=a("bbf5"),c=a.n(l),u=(a("53b4"),a("c1df")),m=a.n(u),h={name:"GeneralCasesForm",components:{DateRangePicker:c.a},data:function(){return{route_name:"",choosenGatra:[],dateRange:{startDate:m()().subtract(6,"days").toDate(),endDate:m()().toDate()},default_ranges:{Today:[m()().toDate(),m()().toDate()],Yesterday:[m()().subtract(1,"days").toDate(),m()().subtract(1,"days").toDate()]},model:{name:"",gatra:"",start_date:m()().subtract(6,"days").toDate(),end_date:m()().toDate(),description:""},error_name:"",error_gatra:"",error_start_date:"",error_end_date:"",error_description:""}},validations:{model:{name:{required:d["required"],maxLength:Object(d["maxLength"])(255)},gatra:{},start_date:{required:d["required"]},end_date:{},description:{}}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["b"])("cases",["detail"])),Object(o["b"])("graph",["status_list_gatra","list_gatra"])),{},{id:function(){return this.$route.params.id},page_title:function(){var e="Ubah Kasus";return"GeneralCasesCreate"===this.route_name&&(e="Tambah Kasus"),e}}),watch:{id:function(){},page_title:function(){},detail:function(e){this.model.name=e.name?e.name:"",this.choosenGatra=e.gatra&&e.gatra.length>0?e.gatra:[],e.start_date&&(this.model.start_date=e.start_date,this.dateRange.startDate=m()(e.start_date,"YYYY-MM-DD")),e.end_date&&(this.model.end_date=e.end_date,this.dateRange.endDate=m()(e.end_date,"YYYY-MM-DD")),this.model.description=e.description?e.description:""},choosenGatra:function(e){this.model.gatra=e}},methods:{setEmptyModel:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in Object.keys(this.model))!0===e&&(this.model[Object.keys(this.model)[t]]="")},setErrors:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!0===e?(this.error_name="",this.error_gatra="",this.error_start_date="",this.error_end_date="",this.error_description=""):!0!==e&&null!==t&&(this.error_name=t.name?t.name:"",this.error_gatra=t.gatra?t.gatra:"",this.error_start_date=t.start_date?t.start_date:"",this.error_end_date=t.end_date?t.end_date:"",this.error_description=t.description?t.description:"")},reset:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.length>0&&void 0!==e[0]&&e[0],!0===s?(t.setEmptyModel(!0),t.$nextTick((function(){t.$v.$reset()})),t.setErrors(!0),window.scroll({top:0,left:0,behavior:"smooth"})):t.$swal.fire({icon:"warning",title:"Apakah anda benar-benar ingin mengosongkan semua data yang sudah diisi?",confirmButtonText:"ya",confirmButtonColor:"#DD6B55",cancelButtonText:"Tidak",showCancelButton:!0,allowOutsideClick:!1}).then((function(e){e.isConfirmed&&t.getData()}));case 2:case"end":return a.stop()}}),a)})))()},pickerUpdate:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.model.start_date=m()(t.dateRange.startDate).format("YYYY-MM-DD"),t.model.end_date=m()(t.dateRange.endDate).format("YYYY-MM-DD");case 2:case"end":return e.stop()}}),e)})))()},getData:function(){this.reset(!0),this.$store.dispatch("graph/getListGatra"),"GeneralCasesEdit"===this.route_name?(Event.$emit("showLoading",!0),this.$store.dispatch("cases/getDetail",this.id).then((function(e){"success"===e?Event.$emit("showLoading",!1):Event.$emit("error")}))):this.$store.commit("cases/setDetail",{})},submit:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.preventDefault(),this.$v.$touch(),this.$v.model.$invalid){for(var s in Object.keys(this.$v.model)){var r=Object.keys(this.$v.model)[s];if(r.includes("$"))return!1;if(this.$v.model[r].$error)break}window.scrollTo(0,0)}else{Event.$emit("showLoading",!0);var i=this.model;i.gatra=JSON.stringify(i.gatra),i=Object.keys(i).map((function(e){return i[e]})),"GeneralCasesCreate"===this.route_name?this.$store.dispatch("cases/create",i).then((function(e){"success"===e.result?(!1===a?t.$router.push("/cases"):t.$router.push("/cases/"+e.data.data.id+"/edit"),t.$swal.fire({icon:"success",title:"Kasus berhasil dibuat",timer:3e3})):e.data&&e.data.message&&e.data.message.errors?(Event.$emit("showLoading",!1),window.scrollTo(0,0)):Event.$emit("error")})):(i=[this.id].concat(i),this.$store.dispatch("cases/update",i).then((function(e){"success"===e.result?(!1===a&&t.$router.push("/cases"),t.$swal.fire({icon:"success",title:"Kasus berhasil diperbarui",timer:3e3})):e.data.message&&e.data.message.errors?(t.setErrors(!1,e.data.message.errors),Event.$emit("showLoading",!1),window.scrollTo(0,0)):Event.$emit("error")})))}}},created:function(){},beforeRouteEnter:function(e,t,a){a((function(t){t.route_name=e.name,"GeneralCasesCreate"!==e.name&&"GeneralCasesEdit"!==e.name||t.getData(),"GeneralCasesCreate"===e.name&&(t.model.start_date=m()(t.dateRange.startDate).format("YYYY-MM-DD"),t.model.end_date=m()(t.dateRange.endDate).format("YYYY-MM-DD"))}))},beforeRouteLeave:function(e,t,a){this.route_name="",this.$store.commit("cases/setDetail",{}),a()},mounted:function(){}},f=h,g=a("2877"),_=Object(g["a"])(f,s,r,!1,null,null,null);t["default"]=_.exports},"99af":function(e,t,a){"use strict";var s=a("23e7"),r=a("d039"),i=a("e8b5"),n=a("861d"),o=a("7b0b"),d=a("50c4"),l=a("8418"),c=a("65f0"),u=a("1dde"),m=a("b622"),h=a("2d00"),f=m("isConcatSpreadable"),g=9007199254740991,_="Maximum allowed index exceeded",p=h>=51||!r((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),v=u("concat"),b=function(e){if(!n(e))return!1;var t=e[f];return void 0!==t?!!t:i(e)},C=!p||!v;s({target:"Array",proto:!0,forced:C},{concat:function(e){var t,a,s,r,i,n=o(this),u=c(n,0),m=0;for(t=-1,s=arguments.length;t<s;t++)if(i=-1===t?n:arguments[t],b(i)){if(r=d(i.length),m+r>g)throw TypeError(_);for(a=0;a<r;a++,m++)a in i&&l(u,m,i[a])}else{if(m>=g)throw TypeError(_);l(u,m++,i)}return u.length=m,u}})}}]);
//# sourceMappingURL=chunk-3a0c1afc.9b526c6c.js.map