(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18d997a5"],{"2b69":function(t,e,a){},"731a":function(t,e,a){"use strict";a("2b69")},"84b1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"form-general",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t._m(0),a("div",{staticClass:"form-general__body w-full"},[a("div",{staticClass:"grid grid-cols-11 gap-8 mb-16"},[t._m(1),a("div",{staticClass:"col-span-7"},[a("div",{staticClass:"field"},[a("label",{staticClass:"field-label"},[t._v("Nama Isu")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.model.title,expression:"model.title"}],staticClass:"field-style",attrs:{placeholder:"Tulis nama isu"},domProps:{value:t.model.title},on:{input:function(e){e.target.composing||t.$set(t.model,"title",e.target.value)}}}),t.$v.model.title.$error?a("span",{staticClass:"field-message text-red-500"},[t._v("This title is required & max length is 255 char.")]):t._e()]),a("div",{staticClass:"field"},[a("div",{staticClass:"box-photo"},[a("div",{staticClass:"box-photo__cover"},[a("figure",{staticClass:"photo-square"},[a("img",{attrs:{src:t.url?t.url:t.getDefaultImage},on:{error:t.getErrorImage}})])]),a("div",{staticClass:"box-photo__info"},[a("label",{staticClass:"field-label"},[t._v("Foto Isu")]),a("div",{staticClass:"cta-upload mb-2"},[a("input",{ref:"photoInput",attrs:{type:"file",accept:"image/png, image/jpeg"},on:{change:t.onFileChange}}),a("span",[t._v("Ganti Foto")])]),a("p",{staticClass:"text-gray-400"},[t._v("Silakan gunakan foto ukuran 1:1 dengan format png atau jpg. Pastikan gambar dibawah ukuran 2MB.")])])]),t.$v.model.image.$error?a("span",{staticClass:"field-message text-red-500"},[t._v("This image is required & max length is 255 char.")]):t._e()])])]),a("div",{staticClass:"grid grid-cols-11 gap-8 mb-16"},[t._m(2),a("div",{staticClass:"col-span-7"},[a("div",{staticClass:"field"},[a("wysiwyg",{model:{value:t.model.description,callback:function(e){t.$set(t.model,"description",e)},expression:"model.description"}})],1)])]),a("div",{staticClass:"grid grid-cols-11 gap-8 mb-16"},[t._m(3),a("div",{staticClass:"col-span-7"},[a("div",{staticClass:"field"},["loading"===t.status_list_gatra.status?a("div",{staticClass:"relative p-10"},[a("b-loading",{attrs:{text:"Memuat data"}})],1):[t.list_gatra&&t.list_gatra.length>0?t._l(t.list_gatra,(function(e){return a("b-checkbox",{key:e.id,staticClass:"mb-4",attrs:{value:e.id,label:e.label},model:{value:t.choosenGatra,callback:function(e){t.choosenGatra=e},expression:"choosenGatra"}})})):a("span",[t._v("-")])]],2)])])]),a("div",{staticClass:"form-general__footer"},[a("router-link",{attrs:{to:"/bdi/isu"}},[a("b-button",{attrs:{text:"Batalkan",type:"button"}})],1),a("b-button",{attrs:{text:"Simpan",kind:"primary",type:"submit"}})],1)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-general__header w-full"},[a("h2",{staticClass:"text-2xl"},[t._v("Informasi Isu")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-span-4 pr-12"},[a("h2",{staticClass:"text-xl font-bold mb-2"},[t._v("Isu")]),a("p",{staticClass:"text-gray-400"},[t._v("Nama isu baiknya tidak lebih dari 3 kata.")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-span-4 pr-12"},[a("h2",{staticClass:"text-xl font-bold mb-2"},[t._v("Keterangan Isu")]),a("p",{staticClass:"text-gray-400"},[t._v("Pastikan deskripsi diisi sesuai dengan informasi yang terbaru.")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-span-4 pr-12"},[a("h2",{staticClass:"text-xl font-bold mb-2"},[t._v("Gatra Isu")]),a("p",{staticClass:"text-gray-400"},[t._v("Pilih Gatra yang sesuai dengan isu, pastikan gatra yang dipilih sudah sesuai agar informasi tidak rancu.")])])}],r=a("1da1"),n=a("5530"),l=(a("96cf"),a("a4d3"),a("e01a"),a("d81d"),a("a15b"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("b64b"),a("caad"),a("2532"),a("b0c0"),a("2f62")),o=a("b5ae"),c={data:function(){return{url:null,choosenGatra:[],model:{title:"",image:null,description:"",gatra:""}}},validations:{model:{title:{required:o["required"],maxLength:Object(o["maxLength"])(255)},image:{},description:{},gatra:{}}},props:["id"],computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(l["b"])("issue",["detail"])),Object(l["b"])("graph",["status_list_gatra","list_gatra"])),{},{route_query:function(){return this.$route.query}}),watch:{id:function(){},detail:function(t){var e=this.route_query.title;void 0!==e&&"create"==this.id?this.model.title=e:this.model.title=t.title?t.title:"",this.model.description=t.description?t.description:"",this.url=t.image?"http"===t.image.substr(0,4)?t.image:"http://"+t.image:null,this.choosenGatra=t.gatra&&t.gatra.length>0?t.gatra.map((function(t){return t.label})):[]},choosenGatra:function(t){this.model.gatra=t.join()},"model.gatra":function(t){console.log(t)}},methods:{onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length){var a=e[0],i=Math.round(a.size/1024);i>2048?Event.$emit("error","Ukuran file lebih dari 2 Mb!"):(this.url=URL.createObjectURL(a),this.model.image=a)}},setEmptyModel:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var e in Object.keys(this.model))!0===t&&(this.model[Object.keys(this.model)[e]]="");this.url=null},reset:function(){var t=this;this.setEmptyModel(!0),this.$nextTick((function(){t.$v.$reset()}))},submit:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.preventDefault(),e.$v.$touch(),!e.$v.model.$invalid){a.next=15;break}a.t0=regeneratorRuntime.keys(Object.keys(e.$v.model));case 4:if((a.t1=a.t0()).done){a.next=13;break}if(i=a.t1.value,s=Object.keys(e.$v.model)[i],!s.includes("$")){a.next=9;break}return a.abrupt("return",!1);case 9:if(!e.$v.model[s].$error){a.next=11;break}return a.abrupt("break",13);case 11:a.next=4;break;case 13:return window.scrollTo(0,0),a.abrupt("return");case 15:Event.$emit("showLoading",!0),r=e.model,console.log(r),"create"===e.id?e.$store.dispatch("issue/create",e.model).then((function(t){"success"===t.result?e.$swal.fire({icon:"warning",title:"Tetap dihalaman ini?",text:"Data berhasil disimpan.",confirmButtonText:"Ya",showCancelButton:!0,cancelButtonText:"Tidak",allowOutsideClick:!1}).then((function(a){a.isConfirmed?(e.$router.push({path:"/isu/"+t.data.id+"/form/profil"}),e.getData()):e.$router.push({path:"/bdi/isu"}),Event.$emit("success","Data berhasil dibuat!")})):Event.$emit("error")})):e.$store.dispatch("issue/update",[e.id,e.model]).then((function(t){"success"===t.result?e.$swal.fire({icon:"success",title:"Data berhasil disimpan.",confirmButtonText:"Tetap dihalaman ini",confirmButtonColor:"#5a80e7",showCancelButton:!0,cancelButtonText:"Kembali ke BDI",allowOutsideClick:!1}).then((function(t){t.isConfirmed?e.getData():e.$router.push({path:"/bdi/isu"}),Event.$emit("success","Data berhasil diperbarui!")})):Event.$emit("error")}));case 19:case"end":return a.stop()}}),a)})))()},getData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.reset(!0);case 2:t.$store.dispatch("graph/getListGatra"),Event.$emit("getDataIssue");case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this.route_query.title;void 0!==t&&"create"==this.id&&(this.model.title=t)},beforeRouteEnter:function(t,e,a){a((function(e){console.log(t.name),"IssueOfFormprofile"===t.name&&e.getData()}))}},u=c,d=(a("731a"),a("2877")),m=Object(d["a"])(u,i,s,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-18d997a5.171e1168.js.map