{"version":3,"sources":["webpack:///./src/pages/graph/Index.vue?b999","webpack:///src/pages/graph/Index.vue","webpack:///./src/pages/graph/Index.vue?baa7","webpack:///./src/pages/graph/Index.vue","webpack:///./src/pages/graph/Index.vue?7b7a"],"names":["render","_vm","this","_h","$createElement","_c","_self","status_search_event","status","idOsm","zoom","center","options","theme","url_light","url_dark","attribution_light","attribution_dark","_l","location","index","key","position","name","_e","staticRenderFns","component"],"mappings":"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","file":"js/chunk-0b4be6dc.145b5064.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box-graph\"},[(_vm.status_search_event.status === 'loading')?_c('b-loading',{attrs:{\"text\":\"Memuat tampilan peta...\",\"kind\":\"circular\"}}):[(_vm.mapLoaded)?_c('l-map',{ref:\"mapRefOSM\",staticStyle:{\"height\":\"100%\",\"width\":\"100%\"},attrs:{\"id\":_vm.idOsm,\"zoom\":_vm.zoom,\"center\":_vm.center,\"options\":_vm.options}},[_c('l-tile-layer',{attrs:{\"url\":_vm.theme === 'light' ? _vm.url_light : _vm.url_dark,\"attribution\":_vm.theme === 'light' ? _vm.attribution_light : _vm.attribution_dark}}),_vm._l((_vm.locations),function(location,index){return _c('l-marker',{key:index,attrs:{\"lat-lng\":location.position}},[_c('l-popup',{attrs:{\"content\":location.name}})],1)}),_c('v-marker-cluster',_vm._l((_vm.locations_cluster),function(location,index){return _c('l-marker',{key:index,attrs:{\"lat-lng\":location.position}},[_c('l-popup',{attrs:{\"content\":location.name}})],1)}),1)],2):_vm._e()]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n    .box-graph\n        //- .pin\n            .popup-pin( v-bind:class=\"{'is-show' : openPopup}\")\n                .popup-pin__header\n                    h3 Ideologi\n                    h3 Gerakan Radikal\n                    h3 Omnibus Law\n                    .pop-up-close(@click=\"closePopup()\")\n                        b-button(icon_only=\"x\" size=\"small\")\n                .popup-pin__body\n                    p.test-xs.text-gray-500 Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n                .popup-pin__footer\n                    Strong Nilai IAN 3.5\n                    .open-info( @click=\"openInfoCardIan()\")\n                        b-button(text=\"Index Ancaman\" kind=\"primary\" width=\"full\")\n            .dots( @click=\"openPopup = !openPopup\")\n\n        b-loading(v-if=\"status_search_event.status === 'loading'\" text=\"Memuat tampilan peta...\" kind=\"circular\")\n\n        //- <iframe frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\" src=\"https://www.openstreetmap.org/export/embed.html?bbox=80.9033203125%2C-18.35452552912665%2C133.19824218750003%2C13.453737213419249&amp;layer=mapnik\"></iframe><br/><small><a href=\"https://www.openstreetmap.org/#map=5/-2.548/107.051\">View Larger Map</a></small>\n\n        template(v-else)\n            l-map(v-if=\"mapLoaded\" :id=\"idOsm\" ref=\"mapRefOSM\" :zoom=\"zoom\" :center=\"center\" :options=\"options\" style=\"height: 100%; width: 100%;\")\n                l-tile-layer(:url=\"theme === 'light' ? url_light : url_dark\" :attribution=\"theme === 'light' ? attribution_light : attribution_dark\")\n                l-marker(v-for=\"(location, index) in locations\" :lat-lng=\"location.position\" v-bind:key=\"index\")\n                    l-popup(:content=\"location.name\")\n                v-marker-cluster\n                    l-marker(v-for=\"(location, index) in locations_cluster\" :lat-lng=\"location.position\" v-bind:key=\"index\")\n                        l-popup(:content=\"location.name\")\n\n</template>\n\n<script>\nimport {mapState} from 'vuex';\n\nimport {LMap, LTileLayer, LMarker, LPopup} from 'vue2-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport {GestureHandling} from 'leaflet-gesture-handling';\nimport 'leaflet-gesture-handling/dist/leaflet-gesture-handling.css';\n\nimport Vue2LeafletMarkerCluster from 'vue2-leaflet-markercluster';\nimport '@/assets/css/MarkerCluster.css';\nimport '@/assets/css/MarkerCluster.Default.css';\n\ndelete L.Icon.Default.prototype._getIconUrl;\n\nL.Icon.Default.imagePath = '';\nL.Icon.Default.mergeOptions({\n    iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n    iconUrl: require('leaflet/dist/images/marker-icon.png'),\n    shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\n});\n\nexport default {\n    name: 'openMapsStreet',\n    components: {\n        LMap,\n        GestureHandling,\n        LTileLayer,\n        LMarker,\n        LPopup,\n        'v-marker-cluster': Vue2LeafletMarkerCluster,\n    },\n    data() {\n        return {\n            openPopup: false,\n\n            mapLoaded: false,\n\n            zoom: 5,\n            center: {\n                lat: -1.712668,\n                lng: 118.959779,\n            },\n            markers: [],\n\n            options: {\n                zoomControl: false,\n                // mapTypeControl: true,\n                // scaleControl: true,\n                // streetViewControl: true,\n                // rotateControl: true,\n                // fullscreenControl: false,\n                // disableDefaultUi: false\n                // scrollwheel: false,\n                gestureHandling: 'cooperative',\n            },\n\n            // url: 'https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png',\n\n            // url_light: 'https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png',\n            // attribution_light: '&copy; <a href=\"https://stadiamaps.com/\">Stadia Maps</a>, &copy; <a href=\"https://openmaptiles.org/\">OpenMapTiles</a> &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors',\n\n            // url_dark: 'https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png',\n            // attribution_dark: '&copy; <a href=\"https://stadiamaps.com/\">Stadia Maps</a>, &copy; <a href=\"https://openmaptiles.org/\">OpenMapTiles</a> &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors',\n\n\n            url_light: 'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',\n            attribution_light: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n\n            // url_dark: 'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',\n            // attribution_dark: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n\n            url_dark: 'https://{s}.tile.jawg.io/jawg-dark/{z}/{x}/{y}{r}.png?access-token='+ this.getOsmDarkModeAccessToken(),\n            attribution_dark: '<a href=\"http://jawg.io\" title=\"Tiles Courtesy of Jawg Maps\" target=\"_blank\">&copy; <b>Jawg</b>Maps</a> &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n\n            // url: 'http://{s}.tile.osm.org/{z}/{x}/{y}.png',\n            // attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n            locations: [],\n            locations_cluster: [],\n            idOsm: 'openstreetmap-graph',\n            // newLoc: '',\n            // newLt : 0,\n            // newLng : 0,\n            icon: L.icon({iconUrl: 'null'}),\n        };\n    },\n    computed: {\n        ...mapState('graph', [\n            'status_search_event',\n            'search_event',\n        ]),\n        ...mapState('config', [\n            'theme',\n        ]),\n    },\n    watch: {\n        status_search_event(newData, oldData) {\n            if (oldData.status === 'loading' && newData.status !== 'loading') {\n                this.startMap();\n            }\n        },\n        theme() {\n            this.startMap();\n        },\n    },\n    methods: {\n        async openInfoCardIan(isOpen=true, id=null, location='', label='', location_id='') {\n            Event.$emit('openIfoIan', isOpen, id, location, label, location_id);\n            if (isOpen) {\n                await this.$store.dispatch('graph/getDetailEvent', id);\n                this.$store.dispatch('graph/getDetailEventIan', [location_id]);\n                this.$store.dispatch('graph/getDetailEventReport', id);\n            }\n        },\n        // closePopup() {\n        //     Event.$emit('closeIfoIan')\n        //     this.openPopup = !this.openPopup\n        // },\n        getData() {\n            this.$store.dispatch('graph/getSearchEvent', []);\n        },\n        startMap() {\n            const self = this;\n\n            // osm\n            self.locations = [];\n            self.locations_cluster = [];\n            // var result = location.features[0];\n\n            // var lng = parseFloat(result.geometry.coordinates[0] ? result.geometry.coordinates[0] : 0);\n            // var lat = parseFloat(result.geometry.coordinates[1] ? result.geometry.coordinates[1] : 0);\n\n            // var lat = self.center.lat;\n            // var lng = self.center.lng;\n\n            this.mapLoaded = true;\n            // console.log(this.search_event)\n\n            const check_coordinates = [];\n            const check_coordinates_cluster = [];\n            const check_coordinates_duplicate = [];\n            const locations = [];\n            const locations_cluster = [];\n\n            if (this.search_event.length > 0) {\n                for (let i = 0; i < this.search_event.length; i++) {\n                    // this.search_event[i]\n\n                    // var contentString = '<div id=\"content\">'+\n                    // var contentString =\n                    //     '<div class=\"pin\">'+\n                    //         '<div class=\"popup-pin is-show\">'+\n                    //             '<div class=\"popup-pin__header\">'+\n                    //                 '<h3>Ideologi</h3>'+\n                    //                 '<h3>Gerakan Radikal</h3>'+\n                    //                 '<h3>Omnibus Law</h3>' +\n\n                    //                 // <div class=\"pop-up-close\">\n                    //                 //     <button class=\"btn btn--small btn--icon-only btn--skin btn--modifier\"><i class=\"b-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg></i></button>\n                    //                 // </div>\n\n                    //             '</div>'+\n                    //             '<div class=\"popup-pin__body\">'+\n                    //                 '<p class=\"test-xs text-gray-500\">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>'+\n                    //             '</div>'+\n                    //             '<div class=\"popup-pin__footer\">'+\n                    //                 '<strong>Nilai IAN 3.5</strong>'+\n                    //                 '<div class=\"open-info\">'+\n                    //                     '<button class=\"btn btn--normal  btn--primary btn--modifier btn--full\"><span>Index Ancaman</span></button>'+\n                    //                 '</div>'+\n                    //             '</div>'+\n                    //         '</div>'+\n                    //         // <div class=\"dots\"></div>\n                    //     // '</div>'+\n                    // '</div>';\n\n                    // ----------------------------------------------------------------------------------------------------------------------------------\n                    // let contentString = '<div id=\"content\">'+\n                    //     '<div id=\"bodyContent\">';\n\n                    // // if (this.search_event[i].gatra && this.search_event[i].gatra.length > 0) {\n                    // //     for (var j = 0; j < this.search_event[i].gatra.length; j++) {\n                    // //         contentString += '<h3>'+ this.search_event[i].gatra[j].id +' ('+ this.search_event[i].gatra[j].proba +')</h3>';\n                    // //     }\n                    // // }\n\n                    // contentString +=\n                    //         // '<div class=\"lineIan\"></div>'+\n                    //         '<p class=\"test-sm\">'+ this.search_event[i].label +'</p>'+\n\n                    //         '<a class=\"btn btn--primary w-full text-center btn-open-index\" data-id=\"'+ this.search_event[i].id +'\" data-location=\"'+ this.search_event[i].location.label +'\" data-label=\"'+ this.search_event[i].label +'\">Nilai Ancaman '+ (this.search_event[i].ian.score.average ? this.search_event[i].ian.score.average : (this.search_event[i].ian.score ? this.search_event[i].ian.score : '-')) +'</a>'+\n\n                    //         // '<strong>Nilai IAN 3.5</strong>'+\n                    //         // '<div class=\"open-info\">'+\n                    //         //     '<button class=\"btn btn--normal btn--primary btn--modifier btn--full btn-open-index\" data-id=\"'+ this.search_event[i].id +'\" data-location=\"'+ this.search_event[i].location.label +'\" data-label=\"'+ this.search_event[i].label +'\"><span>Index Ancaman</span></button>'+\n                    //         // '</div>'+\n\n                    //     '</div>'+\n                    // '</div>';\n\n                    // ----------------------------------------------------------------------------------------------------------------------------------\n\n                    // var contentString = '<div id=\"content\">'+\n                    //   '<div id=\"bodyContent\">'+\n\n                    //     '<div class=\"pin\">'+\n                    //         '<div class=\"popup-pin is-show\">'+\n                    //             '<div class=\"popup-pin__header\">';\n                    //                 // '<h3>Gerakan Radikal</h3>'+\n                    //                 // '<h3>Omnibus Law</h3>' +\n\n\n                    //                 if (this.search_event[i].gatra && this.search_event[i].gatra.length > 0) {\n                    //                     for (var j = 0; j < this.search_event[i].gatra.length; j++) {\n                    //                         contentString += '<h3>'+ this.search_event[i].gatra[j].id +' ('+ this.search_event[i].gatra[j].proba +')</h3>';\n                    //                     }\n                    //                 }\n\n                    //                 // <div class=\"pop-up-close\">\n                    //                 //     <button class=\"btn btn--small btn--icon-only btn--skin btn--modifier\"><i class=\"b-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg></i></button>\n                    //                 // </div>\n\n                    //     contentString +=\n                    //             '</div>'+\n                    //             '<div class=\"popup-pin__body\">'+\n                    //                 '<p class=\"test-xs text-gray-500\">'+ this.search_event[i].label +'</p>'+\n                    //             '</div>'+\n                    //             '<div class=\"popup-pin__footer\">'+\n                    //                 '<strong>Nilai IAN 3.5</strong>'+\n                    //                 '<div class=\"open-info\">'+\n                    //                     '<button class=\"btn btn--normal btn--primary btn--modifier btn--full btn-open-index\"><span>Index Ancaman</span></button>'+\n                    //                 '</div>'+\n                    //             '</div>'+\n                    //         '</div>'+\n                    //         // <div class=\"dots\"></div>\n                    //     '</div>'+\n\n                    //     // '<table>'+\n                    //     //   '<tr>'+\n                    //     //     '<td>Link Location</td>'+\n                    //     //     '<td>:</td>'+\n                    //     //     '<td><a target=\"_blank\" href=\"https://www.google.com/maps?q='+lat+','+lng+'\" style=\"color: #43ea92;\">'+'Google Maps</a> '+\n                    //     //     '</td>'+\n                    //     //   '</tr>'+\n                    //     // '</table>'+\n                    //     '</div>'+\n                    // '</div>';\n\n                    // let centerTmp = [self.center['lat'], self.center['lng']];\n\n\n                    // ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n\n                    // let centerTmp = [this.search_event[i].location.coordinate.latitude, this.search_event[i].location.coordinate.longtitude];\n\n                    // if (this.search_event[i].location.sub_location && this.search_event[i].location.sub_location.coordinate && this.search_event[i].location.sub_location.coordinate.latitude && this.search_event[i].location.sub_location.coordinate.longtitude) {\n                    //     centerTmp = [this.search_event[i].location.sub_location.coordinate.latitude, this.search_event[i].location.sub_location.coordinate.longtitude];\n                    // }\n\n                    // self.locations.push({\n                    //     name: contentString,\n                    //     position: centerTmp,\n                    // });\n\n                    // ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n                    let centerTmp = [];\n                    let location_id = '';\n\n                    if (this.search_event[i].location && this.search_event[i].location.sub_location && this.search_event[i].location.sub_location.coordinate && this.search_event[i].location.sub_location.coordinate.latitude && this.search_event[i].location.sub_location.coordinate.longtitude) {\n                        centerTmp = [this.search_event[i].location.sub_location.coordinate.latitude, this.search_event[i].location.sub_location.coordinate.longtitude];\n                        location_id = this.search_event[i].location.sub_location.id;\n                    } else if (this.search_event[i] && this.search_event[i].location && this.search_event[i].location.coordinate && this.search_event[i].location.coordinate.latitude && this.search_event[i].location.coordinate.longtitude) {\n                        centerTmp = [this.search_event[i].location.coordinate.latitude, this.search_event[i].location.coordinate.longtitude];\n                        location_id = this.search_event[i].location.id;\n                    }\n\n\n                    if (centerTmp.length > 0) {\n                        let contentString = '<div id=\"content\">'+\n                        '<div id=\"bodyContent\">';\n\n                        // if (this.search_event[i].gatra && this.search_event[i].gatra.length > 0) {\n                        //     for (var j = 0; j < this.search_event[i].gatra.length; j++) {\n                        //         contentString += '<h3>'+ this.search_event[i].gatra[j].id +' ('+ this.search_event[i].gatra[j].proba +')</h3>';\n                        //     }\n                        // }\n\n                        contentString +=\n                                // '<div class=\"lineIan\"></div>'+\n                                '<p class=\"test-sm\">'+ this.search_event[i].label +'</p>'+\n\n                                '<a class=\"btn btn--primary w-full text-center btn-open-index\" data-id=\"'+ this.search_event[i].id +'\" data-location=\"'+ this.search_event[i].location.label +'\" data-location-id=\"'+ location_id +'\" data-label=\"'+ this.search_event[i].label +'\">Nilai Ancaman '+ (this.search_event[i].ian.score.average ? this.search_event[i].ian.score.average.toFixed(2) : (this.search_event[i].ian.score ? this.search_event[i].ian.score.toFixed(2) : '-')) +'</a>'+\n\n                                // '<strong>Nilai IAN 3.5</strong>'+\n                                // '<div class=\"open-info\">'+\n                                //     '<button class=\"btn btn--normal btn--primary btn--modifier btn--full btn-open-index\" data-id=\"'+ this.search_event[i].id +'\" data-location=\"'+ this.search_event[i].location.label +'\" data-label=\"'+ this.search_event[i].label +'\"><span>Index Ancaman</span></button>'+\n                                // '</div>'+\n\n                            '</div>'+\n                        '</div>';\n\n                        if (check_coordinates.includes(centerTmp.toString())) {\n                            if (check_coordinates_duplicate.includes(centerTmp.toString()) === false) {\n                                check_coordinates_duplicate .push(centerTmp.toString());\n                            }\n                            check_coordinates_cluster.push(centerTmp.toString());\n\n                            // self.locations_cluster.push({\n                            locations_cluster.push({\n                                name: contentString,\n                                position: centerTmp,\n                            });\n                        } else {\n                            check_coordinates.push(centerTmp.toString());\n\n                            // self.locations.push({\n                            locations.push({\n                                name: contentString,\n                                position: centerTmp,\n                            });\n                        }\n                    }\n                }\n\n                // console.log('locations')\n                // console.log(locations.length)\n                // console.log(locations_cluster.length)\n                // console.log('check_coordinates')\n                // console.log(check_coordinates.length)\n                // console.log(check_coordinates_cluster.length)\n                // console.log('duplicate')\n                // console.log(check_coordinates_duplicate.length)\n\n                if (check_coordinates.length > 0 || check_coordinates_cluster.length > 0) {\n                    const delete_location_index = [];\n\n                    for (var i = 0; i < check_coordinates.length; i++) {\n                        for (let j = 0; j < check_coordinates_duplicate.length; j++) {\n                            if (check_coordinates[i] === check_coordinates_duplicate[j]) {\n                                locations_cluster.push(locations[i]);\n                                delete_location_index.push(i);\n                            }\n                        }\n                    }\n\n                    if (delete_location_index.length > 0) {\n                        for (var i = 0; i < delete_location_index.length; i++) {\n                            locations.splice(delete_location_index[i], 1);\n                        }\n                    }\n                    self.locations = locations;\n                    self.locations_cluster = locations_cluster;\n                }\n\n                if (self.locations.length > 0 || self.locations_cluster.length > 0) {\n                    self.$nextTick(() => {\n                        self.$nextTick(() => {\n                            const map = self.$refs.mapRefOSM.mapObject;\n\n                            map.on('popupclose', function(e) {\n                                self.openInfoCardIan(false);\n                            });\n\n                            map.on('popupopen', function(e) {\n                                // var marker = e.popup._source;\n                                const elements = document.getElementsByClassName('btn-open-index');\n\n                                const myFunction = function() {\n                                    const id = this.getAttribute('data-id');\n                                    const location = this.getAttribute('data-location');\n                                    const label = this.getAttribute('data-label');\n                                    const location_id = this.getAttribute('data-location-id');\n\n                                    // console.log([id, label]);\n                                    // alert(attribute);\n\n                                    // console.log('from pop up');\n                                    // console.log(e.popup._latlng);\n                                    self.openInfoCardIan(true, id, location, label, location_id);\n                                };\n\n                                for (let i = 0; i < elements.length; i++) {\n                                    elements[i].addEventListener('click', myFunction, false);\n                                }\n                            });\n                        });\n                    });\n                }\n            }\n        },\n    },\n    mounted() {\n        // console.log('mounted on index graph')\n        this.getData();\n    },\n};\n</script>\n\n<style lang=\"sass\">\n    .box-graph\n        width: 100%\n        height: 100vh\n        position: relative\n        iframe\n            width: 100%\n            height: 100%\n\n        .pin\n            position: absolute\n            top: 60%\n            left: 50%\n            cursor: pointer\n            .popup-pin\n                @apply bg-white rounded shadow-xl p-4 w-56 absolute\n                font-size: 13px\n                bottom: 24px\n                left: -112px\n                display: none\n                &.is-show\n                    display: block\n                &::after\n                    content: ''\n                    position: absolute\n                    left: 50%\n                    bottom: -6px\n                    background-color: #fff\n                    width: 16px\n                    height: 16px\n                    margin-left: -8px\n                    transform: rotate(45deg)\n                    border-radius: 4px\n\n                &__header\n                    @apply mb-4 pb-4 border-b border-gray-200\n                    h3\n                        font-weight: 700\n                &__body\n                    @apply mb-4 pb-4 border-b border-gray-200\n\n                &__footer\n                    @apply text-center\n                    strong\n                        font-size: 1rem\n                        margin-bottom: 1rem\n                        display: block\n\n                .pop-up-close\n                    @apply right-2 top-2 absolute\n\n            .dots\n                width: 16px\n                height: 16px\n                border-radius: 100%\n                background-color: red\n                margin-left: -8px\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=b6ba3948&lang=pug&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&lang=sass&\""],"sourceRoot":""}