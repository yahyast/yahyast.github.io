(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77657f08"],{"110a":function(t,i,a){"use strict";var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return"loading"===t.status_detail?a("header",{staticClass:"header-page header-page--bdi"},[a("div",{staticClass:"m-7 p-7 relative text-center w-full h-full"},[a("b-loading",{attrs:{text:"Memuat data"}})],1)]):a("header",{staticClass:"header-page header-page--bdi"},[a("div",{staticClass:"header-page--bdi__cover"},[a("img",{attrs:{src:t.detail.photo?t.detail.photo:"",alt:"alt"},on:{error:t.getErrorImage}})]),a("div",{staticClass:"header-page--bdi__info"},[a("h1",{staticClass:"heading"},[t._v(t._s(t.detail.name&&t.detail.name.length>0?t.detail.name:"-"))])])])},s=[],n=a("5530"),o=a("2f62"),l={name:"OrganizationHeader",data:function(){return{}},computed:Object(n["a"])({},Object(o["b"])("organization",["status_detail","detail"])),watch:{detail:function(t){console.log(t)}},methods:{}},r=l,d=a("2877"),c=Object(d["a"])(r,e,s,!1,null,null,null);i["a"]=c.exports},d224:function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"content-bdi"},[a("div",{staticClass:"content-bdi__header"},[a("HeadOrganization")],1),a("div",{staticClass:"content-bdi__body"},[a("div",{staticClass:"grid grid-cols-2 gap-8"},[a("div",{staticClass:"block"},[a("div",{staticClass:"flex items-center justify-between"},[a("h2",{staticClass:"subheading",staticStyle:{"padding-bottom":"0px"}},[t._v("Aktivitas")]),"loading"!=t.status_detail?a("b-button",{attrs:{text:"Tambah Aktivitas",text_icon_left:"file-plus",kind:"primary"},nativeOn:{click:function(i){return t.openModalActivity()}}}):t._e()],1),"loading"===t.status_detail?a("div",{staticClass:"container-timeline"},[a("div",{staticClass:"p-20 relative text-center w-full h-full"},[a("b-loading",{attrs:{text:"Memuat data aktivitas"}})],1)]):a("div",{staticClass:"container-timeline relative"},[t.detail.organization_activity&&t.detail.organization_activity.length>0?a("div",{staticClass:"box-timeline scrollbox"},[a("div",{staticClass:"box-timeline__inner scrollbox-container"},t._l(t.detail.organization_activity,(function(i){return a("div",{staticClass:"timeline"},[a("div",{staticClass:"timeline__time"},[a("span",[t._v(t._s(t.datetimeFormat(i.activity_date)))])]),a("div",{staticClass:"timeline__content"},[a("p",[t._v(t._s(t.trimmedStr(i.notes)))])])])})),0)]):a("div",{staticClass:"absolute text-center w-full h-full flex items-center justify-center"},[a("div",{staticClass:"block"},[a("b-icon",{staticClass:"mb-4",attrs:{name:"info",size:"2x"}}),a("p",[t._v("Belum ada aktivitas")])],1)])])]),a("div",{staticClass:"block"},[a("h2",{staticClass:"subheading"},[t._v("Tokoh & Organisasi Terkait")]),a("div",{staticClass:"card-graph mt-5"},["loading"===t.status_detail?[a("b-loading",{staticClass:"b-loading-inherit",attrs:{text:"Memuat data"}})]:a("div",{staticClass:"box-network"},[a("network",{ref:"network",staticClass:"box-network__canvas",attrs:{nodes:t.nodes,edges:t.edges,options:t.options}})],1)],2)])]),a("div",{staticClass:"py-10"},["loading"!=t.status_list_trend.status&&t.list_trend.doc&&0==t.list_trend.doc.length?[a("div",{staticClass:"card-bg-theme p-4 rounded"},[a("div",{staticClass:"w-full h-80 flex items-center justify-center"},[a("div",{staticClass:"block"},[a("b-icon",{staticClass:"mb-4",attrs:{name:"info",size:"2x"}}),a("p",[t._v("Belum ada Trend")])],1)])])]:[a("h2",{staticClass:"subheading"},[t._v("Trend Terkait")]),a("div",{staticClass:"bdi-trend"},[a("div",{staticClass:"bdi-trend__sidebar scrollbox"},[a("div",{staticClass:"bdi-trend-sidebar bdi-trend-sidebar--organization scrollbox-container"},["loading"===t.status_list_trend.status?a("b-loading",{staticClass:"b-loading-inherit mt-2",attrs:{text:"Memuat informasi trend",kind:"circular"}}):[t.list_data_topic.length>0?a("div",{staticClass:"w-full"},[t._l(t.list_data_topic,(function(i,e){return a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.label,expression:"item.label"}],staticClass:"list-trend",class:e==t.active_topic?"active":"",on:{click:function(a){return t.selectTopic(i,e)}}},[t._v(t._s(i.label))])})),t.list_data_topic.length>0||"loading"===t.status_list_trend.status?["loading"===t.status_list_trend.status?a("div",{staticClass:"relative"},[a("b-loading",{attrs:{text:"Menampilkan trend lainnya"}})],1):[t.list_trend.pagination&&t.list_trend.pagination.hasNext&&!0===t.list_trend.pagination.hasNext?a("b-button",{attrs:{text:"Tampilkan trend lainnya",kind:"tertiary"},nativeOn:{click:function(i){return t.loadMore()}}}):t._e()]]:t._e()],2):t._e()]],2)]),a("div",{staticClass:"bdi-trend__content"},[a("div",{staticClass:"bdi-trend-content bdi-trend-content--media-on-organization",class:{"bdi-trend-content--open-calendar":t.floatingCalendar}},[a("TopicMedia")],1)]),a("div",{staticClass:"bdi-trend__sidebar"},[a("div",{staticClass:"bdi-trend-sidebar bdi-trend-sidebar--twitter-on-organization"},[a("TopicTwitter")],1)])])]],2)]),a("div",{staticClass:"modal",class:{"modal--show":t.openActivity}},[a("div",{staticClass:"modal-overlay"}),a("form",{staticClass:"modal-container",on:{submit:function(i){return i.preventDefault(),t.submit(i)}}},[a("div",{staticClass:"modal-container__header"},[a("h2",[t._v("Tambah Aktivitas")]),a("b-button",{attrs:{icon_only:"x",type:"button"},nativeOn:{click:function(i){t.openActivity=!t.openActivity}}})],1),a("div",{staticClass:"modal-container__body"},[a("div",{staticClass:"p-4 pb-0"},[a("div",{staticClass:"field mb-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.model.activity_date,expression:"model.activity_date"}],staticClass:"field-style",attrs:{type:"date",placeholder:"Pilih Waktu"},domProps:{value:t.model.activity_date},on:{input:function(i){i.target.composing||t.$set(t.model,"activity_date",i.target.value)}}}),t.$v.model.activity_date.$error?a("span",{staticClass:"field-message text-red-500"},[t._v("Tanggal dibutuhkan.")]):t._e()]),a("div",{staticClass:"field mb-4"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.model.notes,expression:"model.notes"}],staticClass:"field-style",staticStyle:{"min-height":"200px"},attrs:{placeholder:"Tulis Keterangan disini"},domProps:{value:t.model.notes},on:{input:function(i){i.target.composing||t.$set(t.model,"notes",i.target.value)}}}),t.$v.model.notes.$error?a("span",{staticClass:"field-message text-red-500"},[t._v("Keterangan dibutuhkan.")]):t._e()])])]),a("div",{staticClass:"modal-container__footer"},[a("b-button",{attrs:{text:"Simpan",kind:"primary",type:"submit"}})],1)])])])},s=[],n=a("1da1"),o=a("5530"),l=(a("96cf"),a("b0c0"),a("b64b"),a("caad"),a("2532"),a("110a")),r=a("bd71"),d=a("891a"),c=a("2f62"),u=a("b5ae"),m={name:"BehaviorOfOrganization",components:{HeadOrganization:l["a"],TopicMedia:r["a"],TopicTwitter:d["a"]},data:function(){return{openActivity:!1,floatingCalendar:!1,timeline:[{time:"16 Juni 20201",content:"Test Update 2"},{time:"29-30 Maret 2021",content:"Bentrok fisik antara Angkatan Muda Partai Golkar (AMPG) kubu Yorrys dan kubu Aburizal Bakrie"},{time:"29-30 Maret 2021",content:"Bentrok fisik antara Angkatan Muda Partai Golkar (AMPG) kubu Yorrys dan kubu Aburizal Bakrie"},{time:"29-30 Maret 2021",content:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."},{time:"29-30 Maret 2021",content:"Bentrok fisik antara Angkatan Muda Partai Golkar (AMPG) kubu Yorrys dan kubu Aburizal Bakrie"}],nodes:[],edges:[],options:{nodes:{borderWidth:0,widthConstraint:{maximum:150}},edges:{color:"rgb(21, 91, 240)"}},model:{activity_date:null,notes:null},list_data_topic:[],limit:100,page:1,keyword:"",timeout:null,active_topic:null}},validations:{model:{activity_date:{required:u["required"]},notes:{required:u["required"]}}},computed:Object(o["a"])(Object(o["a"])({id:function(){return this.$route.params.id}},Object(c["b"])("organization",["status_detail","detail","status_related_organizations","related_organizations"])),Object(c["b"])("trend",["status_list_trend","list_trend"])),watch:{detail:function(t){try{var i={id:0,label:t.name,shape:"circle",color:"#dc2626",font:{color:"white",size:12}};this.nodes.push(i)}catch(a){console.log(a)}},status_detail:function(t,i){"loading"!==t&&"loading"===i&&this.$store.dispatch("organization/getRelatedOrganizations",[this.detail.name?this.detail.name:null])},related_organizations:function(t){if(t.length>0)for(var i=0;i<t.length;i++){var a="rgb(21, 91, 240)";"ORG"===t[i].class&&(a="rgb(17, 159, 161)");var e=this.nodes.length,s={id:e+1,label:t[i].label,shape:"circle",color:a,font:{color:"white",size:12}},n={from:e+1,to:0};this.nodes.push(s),this.edges.push(n)}},list_trend:function(t){if(t&&t.doc&&t.doc.length>0){for(var i=0;i<t.doc.length;i++)this.list_data_topic.push(t.doc[i]);1==this.page&&(this.active_topic=0,Event.$emit("getMediaOnDetail",this.encodeDetailData(t.doc[0])))}}},methods:{selectTopic:function(t,i){i!==this.active_topic&&(this.active_topic=i,Event.$emit("getMediaOnDetail",this.encodeDetailData(t)))},setEmptyModel:function(){this.model={activity_date:null,notes:null}},openModalActivity:function(){this.openActivity=!this.openActivity,this.setEmptyModel(!0)},reset:function(){this.openActivity=!1,this.setEmptyModel(!0)},loadMore:function(){this.page+=1,this.getData()},getData:function(){var t=arguments,i=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var e,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e=t.length>0&&void 0!==t[0]&&t[0],"loading"===i.status_detail){a.next=4;break}return a.next=4,i.reset(!0);case 4:Event.$emit("getDataActor"),e&&(i.list_data_topic=[],i.page=1),s={status:"loading",cancel:null,code:null},i.$store.commit("news/setStatusListNews",s),i.$store.dispatch("trend/getListTrend",[i.limit,i.page,"",i.id,"true"]).catch((function(t){s.status=!1,i.$store.commit("news/setStatusListNews",s)}));case 9:case"end":return a.stop()}}),a)})))()},submit:function(t){var i=this;if(t.preventDefault(),this.$v.$touch(),this.$v.model.$invalid)for(var a in Object.keys(this.$v.model)){var e=Object.keys(this.$v.model)[a];if(e.includes("$"))return!1;if(this.$v.model[e].$error)break}else{Event.$emit("showLoading",!0);var s={organization_activity:this.detail.organization_activity};s.organization_activity.unshift(this.model),s.organization_activity=JSON.stringify(s.organization_activity),this.$store.dispatch("organization/update",[this.id,s,"activities"]).then((function(t){"success"===t.result?i.$swal.fire({icon:"success",title:"Data berhasil disimpan.",confirmButtonText:"Kembali",confirmButtonColor:"#5a80e7",showCancelButton:!1,allowOutsideClick:!1}).then((function(t){t.isConfirmed?i.getData(!0):i.$router.push({path:"/bdi/tokoh"}),Event.$emit("success","Data berhasil diperbarui!")})):Event.$emit("error")}))}}},mounted:function(){if(this.getData(),"loading"!==this.status_detail){if(this.nodes.length<1){var t={id:0,label:this.detail.name,shape:"circle",color:"#dc2626",font:{color:"white",size:12}};this.nodes.push(t)}this.$store.dispatch("organization/getRelatedOrganizations",[this.detail.name?this.detail.name:null])}},created:function(){var t=this;Event.$on("openFloatingCalendar",(function(){t.floatingCalendar=!t.floatingCalendar}))}},v=m,h=a("2877"),g=Object(h["a"])(v,e,s,!1,null,null,null);i["default"]=g.exports}}]);
//# sourceMappingURL=chunk-77657f08.a4749b18.js.map