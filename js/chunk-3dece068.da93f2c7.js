(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dece068"],{7052:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("form",{staticClass:"form-general",on:{submit:function(a){return a.preventDefault(),t.submit(a)}}},[t._m(0),e("div",{staticClass:"form-general__body w-full"},[e("div",{staticClass:"grid grid-cols-11 gap-8 mb-16"},[t._m(1),e("div",{staticClass:"col-span-7"},[e("div",{staticClass:"field flex-grow"},[e("label",{staticClass:"field-label"},[t._v("Nama Jabatan")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.position,expression:"position"}],staticClass:"field-style",attrs:{placeholder:"Contoh 'Ketua Umum'",type:"text"},domProps:{value:t.position},on:{input:function(a){a.target.composing||(t.position=a.target.value)}}})]),e("div",{staticClass:"field flex-grow"},[e("label",{staticClass:"field-label"},[t._v("Pilih Tokoh")]),e("input",{staticClass:"field-style cursor-pointer",attrs:{placeholder:"Cari nama tokoh",type:"text",readonly:""},domProps:{value:t.choosen_actor.name?t.choosen_actor.name:"Cari tokoh"},on:{focus:function(a){t.openModalActorOfStructure=!t.openModalActorOfStructure}}})]),e("div",{staticClass:"field"},[e("b-button",{attrs:{text:"Tambah Struktur",text_icon_left:"plus",kind:"tertiary",type:"button"},nativeOn:{click:function(a){return t.addStructure()}}})],1)])]),e("div",{staticClass:"grid grid-cols-11 gap-8 mb-16"},[t._m(2),e("div",{staticClass:"col-span-7"},[t.choosen_structure.length>0?t._l(t.choosen_structure,(function(a,r){return e("div",{staticClass:"choosen-actor saved-item"},[e("div",{staticClass:"flex-grow grid grid-cols-2"},[e("span",{staticClass:"flex h-10 items-center pl-4"},[t._v(t._s(t.choosen_structure[r].position))]),e("div",{staticClass:"flex items-center"},[e("figure",{staticClass:"mr-2"},[e("img",{staticClass:"avatar",attrs:{src:a.figure.photo,alt:"alt"},on:{error:function(a){return t.getErrorImage(a,"profile")}}})]),e("span",{staticClass:"block"},[t._v(t._s(a.figure.name))])])]),e("div",{staticClass:"block-button-delete"},[e("b-button",{attrs:{icon_only:"trash",kind:"danger",size:"small",type:"button"},nativeOn:{click:function(a){return t.removeStructure(r)}}})],1)])})):e("span",[t._v("Silakan tambah struktur")])],2)])]),e("div",{staticClass:"form-general__footer pb-6"},[e("router-link",{attrs:{to:"/bdi/organisasi"}},[e("b-button",{attrs:{text:"Batalkan",type:"button"}})],1),e("b-button",{attrs:{text:"Simpan",kind:"primary",type:"submit"}})],1),e("div",{staticClass:"modal",class:{"modal--show":t.openModalActorOfStructure}},[e("div",{staticClass:"modal-overlay"}),e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-container__header"},[e("h2",[t._v("Tokoh")]),e("b-button",{attrs:{icon_only:"x",type:"button"},nativeOn:{click:function(a){t.openModalActorOfStructure=!t.openModalActorOfStructure}}})],1),e("div",{staticClass:"modal-container__body"},[e("div",{staticClass:"p-4 pb-0"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],ref:"inputKeyword",staticClass:"field-style field-style--small",attrs:{id:"input-keyword-actor",placeholder:"Cari Nama Tokoh"},domProps:{value:t.keyword},on:{keyup:t.searchKeyword,input:function(a){a.target.composing||(t.keyword=a.target.value)}}})]),e("div",{staticClass:"boxed boxed-actor relative"},[!1===t.status_search_actor.status&&t.keyword.length>=0?e("div",{staticClass:"flex items-center justify-center h-full"},[e("div",{staticClass:"text-center w-80"},[e("b-icon",{staticClass:"text-gray-500 mb-4",attrs:{name:"users",size:"2x"}}),e("p",[t._v("Silakan ketik minimal 3 karakter untuk mencari tokoh.")])],1)]):t.keyword.length>0&&"loading"===t.status_search_actor.status?e("b-loading",{attrs:{text:"Mencari "+t.keyword}}):t.search_actor.length>0?e("div",{staticClass:"pt-4"},t._l(t.search_actor,(function(a,r){return e("button",{staticClass:"list-of-actor",attrs:{type:"button"},on:{click:function(a){return t.chooseActor(r)}}},[e("figure",{staticClass:"mr-2"},[e("img",{staticClass:"w-10 h-10 rounded",attrs:{src:a.photo,alt:"alt"},on:{error:function(a){return t.getErrorImage(a,"profile")}}})]),e("span",[t._v(t._s(a.name))])])})),0):0===t.search_actor.length?e("div",{staticClass:"flex items-center justify-center h-full"},[e("div",{staticClass:"text-center w-80 text-red-500"},[e("b-icon",{staticClass:"mb-4",attrs:{name:"info",size:"2x"}}),e("p",[t._v("Maaf, tokoh "+t._s(t.keyword)+" tidak ditemukan.")])],1)]):t._e()],1)])])])])},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"form-general__header w-full"},[e("h2",{staticClass:"text-2xl"},[t._v("Struktur Organisasi")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-span-4 pr-12"},[e("h2",{staticClass:"text-xl font-bold mb-2"},[t._v("Tambah Struktur")]),e("p",{staticClass:"text-gray-400"},[t._v("Silakan buat jabatan baru dan pilih tokoh.")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-span-4 pr-12"},[e("h2",{staticClass:"text-xl font-bold mb-2"},[t._v("Struktur terpilih")]),e("p",{staticClass:"text-gray-400"},[t._v("Anda bisa mengubah dan menghapus struktur yang sudah dipilih.")])])}],s=e("1da1"),n=e("5530"),i=(e("96cf"),e("d81d"),e("b64b"),e("4de4"),e("b0c0"),e("a434"),e("2f62")),c={name:"FormStructureOfOrganization",props:["id"],data:function(){return{openModalActorOfStructure:!1,GotActor:!1,FindingActor:!1,FoundActor:!1,addedStructure:[{jabatan:"Ketua Umum",actor:"Wawan Setiawan",photo:"https://randomuser.me/api/portraits/men/82.jpg"},{jabatan:"Wakil Ketua Umum",actor:"Hari Panca",photo:"https://randomuser.me/api/portraits/men/12.jpg"},{jabatan:"Departemen Propaganda & Terbitan",actor:"Tessa Kurnawati",photo:"https://randomuser.me/api/portraits/women/22.jpg"},{jabatan:"Departemen Hubungan Internasional",actor:"Wulandari",photo:"https://randomuser.me/api/portraits/women/32.jpg"}],actor:[{name:"Wawan Setiawan",photo:"https://randomuser.me/api/portraits/men/82.jpg"},{name:"Hari Panca",photo:"https://randomuser.me/api/portraits/men/12.jpg"},{name:"Tessa Kurnawati",photo:"https://randomuser.me/api/portraits/women/22.jpg"},{name:"Wulandari",photo:"https://randomuser.me/api/portraits/women/32.jpg"},{name:"Wawan Setiawan",photo:"https://randomuser.me/api/portraits/men/82.jpg"},{name:"Hari Panca",photo:"https://randomuser.me/api/portraits/men/12.jpg"},{name:"Tessa Kurnawati",photo:"https://randomuser.me/api/portraits/women/22.jpg"},{name:"Wulandari",photo:"https://randomuser.me/api/portraits/women/32.jpg"},{name:"Wawan Setiawan",photo:"https://randomuser.me/api/portraits/men/82.jpg"},{name:"Hari Panca",photo:"https://randomuser.me/api/portraits/men/12.jpg"},{name:"Tessa Kurnawati",photo:"https://randomuser.me/api/portraits/women/22.jpg"},{name:"Wulandari",photo:"https://randomuser.me/api/portraits/women/32.jpg"},{name:"Wawan Setiawan",photo:"https://randomuser.me/api/portraits/men/82.jpg"},{name:"Hari Panca",photo:"https://randomuser.me/api/portraits/men/12.jpg"},{name:"Tessa Kurnawati",photo:"https://randomuser.me/api/portraits/women/22.jpg"},{name:"Wulandari",photo:"https://randomuser.me/api/portraits/women/32.jpg"},{name:"Wawan Setiawan",photo:"https://randomuser.me/api/portraits/men/82.jpg"},{name:"Hari Panca",photo:"https://randomuser.me/api/portraits/men/12.jpg"},{name:"Tessa Kurnawati",photo:"https://randomuser.me/api/portraits/women/22.jpg"},{name:"Wulandari",photo:"https://randomuser.me/api/portraits/women/32.jpg"},{name:"Hari Panca",photo:"https://randomuser.me/api/portraits/men/12.jpg"},{name:"Tessa Kurnawati",photo:"https://randomuser.me/api/portraits/women/22.jpg"},{name:"Wulandari",photo:"https://randomuser.me/api/portraits/women/32.jpg"},{name:"Wawan Setiawan",photo:"https://randomuser.me/api/portraits/men/82.jpg"},{name:"Hari Panca",photo:"https://randomuser.me/api/portraits/men/12.jpg"},{name:"Tessa Kurnawati",photo:"https://randomuser.me/api/portraits/women/22.jpg"},{name:"Wulandari",photo:"https://randomuser.me/api/portraits/women/32.jpg"}],keyword:"",timeout:null,position:"",choosen_actor:{},choosen_structure:[],model:{structure:[]}}},computed:Object(n["a"])(Object(n["a"])({},Object(i["b"])("actor",["status_search_actor","search_actor"])),Object(i["b"])("organization",["detail"])),watch:{detail:function(t){if(t.structure){var a=t.structure.map((function(t){return{position:t.position,figure:t.figure}}));this.choosen_structure=a}},openModalActorOfStructure:function(t){var a=this;!0===t?this.$nextTick((function(){return a.$refs.inputKeyword.focus()})):(this.keyword="",this.resetSearchActor())},choosen_structure:function(t){var a=t.map((function(t){return{position:t.position,figure_id:t.figure.id}}));this.model.structure=a}},methods:{getData:function(){return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Event.$emit("getDataOrganization");case 1:case"end":return t.stop()}}),t)})))()},resetSearchActor:function(){this.$store.dispatch("actor/cancelSearchActor");var t=this.status_search_actor;t.status=!1,this.$store.commit("actor/setStatusSearchActor",t),this.$store.commit("actor/setSearchActor",[])},searchKeyword:function(){if(clearTimeout(this.timeout),this.keyword.length>=3){var t=this;this.timeout=setTimeout((function(){t.$store.dispatch("actor/getSearchActor",[30,1,t.keyword])}),650)}else this.resetSearchActor()},chooseActor:function(t){var a=this.search_actor[t];this.choosen_actor=a,this.openModalActorOfStructure=!1},addStructure:function(){if(0!==this.position.length&&0!=Object.keys(this.choosen_actor).length){var t={position:this.position,figure:this.choosen_actor};if(0===this.choosen_structure.length)this.choosen_structure.push(t);else{var a=this.choosen_structure.filter((function(a){return a.position===t.position}));if(a.length>0)return void Event.$emit("warning","Jabatan telah terdaftar!");this.choosen_structure.push(t)}this.position="",this.choosen_actor={}}else Event.$emit("warning","Jabatan dan tokoh wajib diisi!")},removeStructure:function(t){var a=this;this.$swal.fire({icon:"warning",title:"Hapus struktur?",text:this.choosen_structure[t].position+" - "+this.choosen_structure[t].figure.name,confirmButtonText:"Ya",confirmButtonColor:"#DD6B55",showCancelButton:!0,cancelButtonText:"Tidak",allowOutsideClick:!1}).then((function(e){e.isConfirmed&&a.choosen_structure.splice(t,1)}))},submit:function(t){var a=this;t.preventDefault(),Event.$emit("showLoading",!0);var e=this.model;e.structure=JSON.stringify(e.structure),this.$store.dispatch("organization/update",[this.id,e,"structure"]).then((function(t){"success"===t.result?a.$swal.fire({icon:"success",title:"Data berhasil disimpan.",confirmButtonText:"Tetap dihalaman ini",confirmButtonColor:"#5a80e7",showCancelButton:!0,cancelButtonText:"Kembali ke BDI",allowOutsideClick:!1}).then((function(t){t.isConfirmed?a.getData():a.$router.push({path:"/bdi/tokoh"}),Event.$emit("success","Data berhasil diperbarui!")})):Event.$emit("error")}))}},beforeRouteEnter:function(t,a,e){e((function(a){console.log(t.name),"FormOfOrganizationStructure"===t.name&&a.getData()}))}},u=c,p=(e("be81"),e("2877")),l=Object(p["a"])(u,r,o,!1,null,null,null);a["default"]=l.exports},be81:function(t,a,e){"use strict";e("de3c")},de3c:function(t,a,e){}}]);
//# sourceMappingURL=chunk-3dece068.da93f2c7.js.map